<Page
    x:Class="BubbleDownloadYoutube.PivotPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BubbleDownloadYoutube"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:data="using:BubbleDownloadYoutube.Data"
    mc:Ignorable="d"
    DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Page.Transitions>
        <TransitionCollection>
            <NavigationThemeTransition>
                <NavigationThemeTransition.DefaultNavigationTransitionInfo>
                    <CommonNavigationTransitionInfo IsStaggeringEnabled="True"/>
                </NavigationThemeTransition.DefaultNavigationTransitionInfo>
            </NavigationThemeTransition>
        </TransitionCollection>
    </Page.Transitions>

    <Grid>
        <Pivot x:Uid="Pivot" Title="Bubblesort - Download" x:Name="pivot" CommonNavigationTransitionInfo.IsStaggerElement="True">
            <!--Pivot item one-->
            <PivotItem
                x:Uid="PivotItem1"
                Margin="19,10,0,4"
                Header="Search"
                DataContext="{Binding SearchResult}"
                d:DataContext="{Binding Groups[0], Source={d:DesignData Source=/DataModel/SampleData.json, Type=data:YoutubeDataSource}}"
                CommonNavigationTransitionInfo.IsStaggerElement="True">
                <!--Double line list with text wrapping-->
                <StackPanel>
                    <Grid Height="44">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition  />
                            <ColumnDefinition Width="70"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Uid="SearchBox" Name="txtConsulta" Grid.Column="0" PlaceholderText="Search" Margin="5,5,15,5" ></TextBox>
                        <Button Grid.Column="1" BorderThickness="0" Click="Button_Click" Padding="0" MinHeight="0" MinWidth="0" Width="60" Height="45" HorizontalAlignment="Left">
                            <Button.Background>
                                <ImageBrush Stretch="None" ImageSource="Assets/search.png"/>
                            </Button.Background>
                        </Button>
                    </Grid>
                    <ProgressBar Name="prgDownload" Visibility="Collapsed" IsIndeterminate="True" Height="10" />

                    <ListView IsItemClickEnabled="True" ItemClick="ItemView_ItemClick"
                		ItemsSource="{Binding Items}" VerticalAlignment="Center" Height="385">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="0,0,0,0" Background="{Binding Cor}" HorizontalAlignment="Stretch">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80"/>
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="Auto" MinWidth="300" />
                                    </Grid.ColumnDefinitions>
                                    <Image Grid.Column="0" Source="{Binding ImagePath}" Stretch="Uniform" 
                                        Width="80" Height="80" Margin="8,0,8,0"></Image>
                                    <TextBlock  Text="{Binding Titulo}"
                					    TextWrapping="Wrap" Grid.Column="2"  
                					    Style="{ThemeResource ListViewItemContentTextBlockStyle}" VerticalAlignment="Top" Margin="0,12,0,0"
                					/>

                                    <TextBlock Text="Views:" Grid.Column="2" VerticalAlignment="Bottom" Margin="0,0,0,18" HorizontalAlignment="Left" />
                                    <TextBlock Text="Duration:" Grid.Column="2" 
                                               VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="0,0,0,4" />


                                    <TextBlock Text="{Binding Visualizacoes}" Grid.Column="2" VerticalAlignment="Bottom" Margin="40,0,0,18" HorizontalAlignment="Left" />
                                    <TextBlock Text="{Binding Duracao}" Grid.Column="2" 
                                               VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="55,0,0,4" />                                    
                                    
                                    <Button BorderThickness="0,0,0,0" Margin="0,4,0,0" Grid.Column="1" Click="Button_Click_1" 
                                        Width="30" Height="40" VerticalAlignment="Top" HorizontalAlignment="Center" Padding="0" MinWidth="0" MinHeight="0"  >
                                        <Button.Background>
                                            <ImageBrush Stretch="Uniform" ImageSource="Assets/Download.png"/>
                                        </Button.Background>
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                </StackPanel>

            </PivotItem>

        </Pivot>
    </Grid>

    <Page.BottomAppBar>
        <CommandBar>
            <AppBarButton x:Uid="AddAppBarButton" x:Name="SearchBarButton" Label="Search" Icon="World" Click="SearchBarButton_Click" />
        </CommandBar>
    </Page.BottomAppBar>
</Page>
